{% extends 'base.html' %}
{% load static %}
{% block content %}
{% include 'partials/_menu.html' %}

<style type="text/css">
  .form-signin {
    width: 100%;
    max-width: 330px;
    padding: 15px;
    margin: auto;
  }

  .form-signin .checkbox {
    font-weight: 400;
  }

  .form-signin .form-control {
    position: relative;
    box-sizing: border-box;
    height: auto;
    padding: 10px;
    font-size: 16px;
  }

  .form-signin .form-control:focus {
    z-index: 2;
  }

  .form-signin input[type="password"] {
    margin-bottom: 10px;
    border-bottom-right-radius: 0;
    border-bottom-left-radius: 0;
  }

  .h3 {
    text-align: center;
  }
</style>

<div class="contact-area section-padding-0">
  <div class="container">
    <div class="row shadow-lg p-3 mb-5 bg-white border rounded">
      <div class="col-12">

        <!--alert-->
        <div class="alert alert-primary text-center border border-dark text-uppercase" role="alert">
            <h4 class="alert-heading">
              Change password your account on the HoldHand website
              <i class="fa fa-registered" aria-hidden="true"></i>
            </h4>
            <p class="alert-heading">
              Your digital and personalized HOLDHAND store. 
              Here you will find several embroidery options. Feel free to contact us!
            </p>
            <hr/>
            <p class="alert-heading">
              All the following data will be mandatory to register
              on the HOLDHAND website
            </p>
          </div>

        <div class="contact-form-area">
          <form class="ls-form ls-form-horizontal was-validated" method="POST" data-toggle="validator" role="form"> {% csrf_token %}

            <h1 class="h3 mb-3 font-weight-normal">Change Password</h1>

            <div class="row form-group">

              <div class="col-12 col-lg-12 ls-prefix-group shadow-lg p-3 mb-5 bg-white border rounded">
                <label for="password" class="control-label">
                  <strong>Old password <i class="fa fa-key fa-fw" aria-hidden="true"></i></strong><br>
                  <small>The password must contain eight (8) to thirty (30) characters, at least one number, an uppercase letter, 
                    lowercase letters and must not contain spaces or emoji.</small>
              </label>
                <input name="old_password" class="form-control border border-dark rounded" placeholder="Old password"
                  type="password" id="id_old_password" name="id_old_password"
                  minlength="8"
                  maxlength="30"  
                  onkeydown="contaCaracteresOldSenha(this)"
                  onkeyup="contaCaracteresOldSenha(this)"
                  onclick="contaCaracteresOldSenha(this)" 
                  required="true">

                  <div>
                    <strong><p style="color: black;" id="divmagsenhaOldReset">30 characters remaining</p></strong>
                  </div>
              </div>

              <div class="col-12 col-lg-6 ls-prefix-group shadow-lg p-3 mb-5 bg-white border rounded">

                <label for="password" class="control-label">
                  <strong>New password <i class="fa fa-key fa-fw" aria-hidden="true"></i></strong><br>
                  <small>The password must contain eight (8) to thirty (30) characters, at least one number, an uppercase letter, 
                    lowercase letters and must not contain spaces or emoji.
                  </small>
              </label>
                <input name="new_password1" class="form-control border border-dark rounded" placeholder="New password"
                  type="password" id="id_new_password1" pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}" name="id_new_password1"
                  title="Senha deve conter de oito (8) a trinta (30) caracteres pelo menos um número, uma letra maiúscula, 
                  uma minúscula e não deve conter espaços ou emoji." 
                  minlength="8"
                  maxlength="30" 
                  onkeydown="contaCaracteresNewSenha(this)"
                  onkeyup="contaCaracteresNewSenha(this)"
                  onclick="contaCaracteresNewSenha(this)" 
                  required="true">

                  <div>
                    <strong><p style="color: black;" id="divmagsenhaNewReset">30 characters remaining</p></strong>
                  </div>
              </div>

              <div class="col-12 col-lg-6 ls-prefix-group shadow-lg p-3 mb-5 bg-white border rounded">
                <label for="password" class="control-label">
                  <strong>Confirm new password <i class="fa fa-key fa-fw" aria-hidden="true"></i></strong><br>
                  <small>The password must contain eight (8) to thirty (30) characters, at least one number, an uppercase letter, 
                    lowercase letters and must not contain spaces or emoji.</small>
                </label>

                <input name="new_password2" class="form-control border border-dark rounded" name="id_new_password2"
                  placeholder="Confirm new password" type="password" id="id_new_password2" pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}" 
                  title="Senha deve conter de oito (8) a trinta (30) caracteres pelo menos um número, uma letra maiúscula, 
                  uma minúscula e não deve conter espaços ou emoji." 
                  minlength="8"
                  maxlength="30" 
                  onkeydown="contaCaracteresConfNewSenha(this)"
                  onkeyup="contaCaracteresConfNewSenha(this)"
                  onclick="contaCaracteresConfNewSenha(this)" 
                  required="true">

                  <div>
                    <strong><p style="color: black;" id="divmagsenhaConfNewReset">30 characters remaining</p></strong>
                  </div>
              </div>

              <div class="col-12 col-lg-12">
                {% for field in form %}
                {% for error in field.errors %}
                <p style="color: red">{{ error }}</p>
                {% endfor %}
                {% endfor %}
              </div>

              <div class="col-12 col-lg-12 form-group">
                <button class="btn btn-outline-primary border border-transparent btn-block" 
                type="submit">Chenge password</button>

                  <button
                  class="btn btn-outline-danger border border-transparent rounded btn-block"
                  type="button"
                  onclick="displayDashboar()">
                  Come back
                </button>
              </div>

            </div>

          </form>
        </div>
      </div>
    </div>
  </div>
</div>


<script>
    function displayDashboar() {
        location.href = "{% url 'dashboard' %}"
    }

  function contaCaracteresNewSenha(campo_passado) {
    var limite = 30;
    var campo = campo_passado.value.length;
    var maxlength = document.getElementById("id_new_password1").setAttribute("maxlength", limite);
    var conta = limite - campo
    var divmagsenhaNewReset = document.getElementById("divmagsenhaNewReset");
    divmagsenhaNewReset.innerHTML = conta + " characters remaining";
  }

  function contaCaracteresConfNewSenha(campo_passado) {
    var limite = 30;
    var campo = campo_passado.value.length;
    var maxlength = document.getElementById("id_new_password2").setAttribute("maxlength", limite);
    var conta = limite - campo
    var divmagsenhaConfNewReset = document.getElementById("divmagsenhaConfNewReset");
    divmagsenhaConfNewReset.innerHTML = conta + " characters remaining";
  }

  function contaCaracteresOldSenha(campo_passado) {
    var limite = 30;
    var campo = campo_passado.value.length;
    var maxlength = document.getElementById("id_old_password").setAttribute("maxlength", limite);
    var conta = limite - campo
    var divmagsenhaOldReset = document.getElementById("divmagsenhaOldReset");
    divmagsenhaOldReset.innerHTML = conta + " characters remaining";
  }
</script>
{% include 'partials/_footer.html' %}
{% endblock %}
